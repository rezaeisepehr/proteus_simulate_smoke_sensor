
در این پروژه یک سیستم اندازه‌گیری آلودگی هوا طراحی شده که با استفاده از برد آردوینو و سنسور تشخیص دود آن را طراحی کردیم. محیط طراحی پروتئوس بوده است و کد آردوینو به زبان c++ نوشته شده است. ادیتوری که در آن کد زدیم نیز برای خود آردوینو می‌باشد.



وسایل به کار رفته:

برد آردوینو 
بازر
سنسور تشخیص دود (MQ-2)
ترانزیستور NMOS
سنسور تشخیص شعله (flame sensor)
دو عدد led سبز و قرمز
موتور servo



شرح پروژه

ابتدا شروع به بستن مدار می‌کنیم. 

Flame Sensor: این سنسور دارای سه پایه می‌باشد. یک پایه‌ی خروجی و یک پایه زمین و پایه‌ی دیگر منبع تغذیه می‌باشد. 
در شبیه‌سازی یک پایه در آن تعبیه شده که به وسیله‌‌ی آن بتوان سنسور را کنترل کرد به این صورت که اگر یک را به آن بدهیم یعنی آتش رو درک کرده از محیط و اگر صفر را به آن بدهیم یعنی محیط امن است که test pin نام دارد.
در این مدار پایه gnd به زمین و پایه‌ی vcc به ولتاژ 5 ولت وصل شده است. پایه‌ی خروجی سنسور نیز به پین 11 برد آردوینو وصل شده است. پین تست نیز به یک سلکتور صفر و یک وصل شده که بتوانیم مدار را تست کنیم.







MQ-2 Sensor: این سنسور نیز مانند سنسور قبل دارای سه پایه می‌باشد. یک پایه‌ی خروجی و یک پایه زمین و پایه‌ی منبع تغذیه می‌باشد. 
در این مدار پایه gnd به زمین و پایه‌ی vcc به ولتاژ 5 ولت وصل شده است. پایه‌ی خروجی سنسور نیز به پین 12 برد آردوینو وصل شده است. پین تست نیز به یک سلکتور صفر و یک وصل شده که بتوانیم سنسور دود را فعال و غیر فعال کنیم.












Arduino Board UNO: یکی از مدل‌های برد آردوینو برای توسعه‌ی مدارات آموزشی و کاربردی می‌باشد. این برد چهارده پین ورودی و خروجی دارد که در این مدار از آن‌ها استفاده می‌کنیم.




servo motor: یک پین را به منبع تغذیه و یک پین را به زمین وصل میکنیم. پین کنترل آن‌را به پین 8 برد آردوینو وصل می‌کنیم. تا بعد از تغییرات داخل کد در صورت وجود خطر آن‌را به سمت 180 درجه ببریم.


برنامه‌ریزی برد:

کد باینری سنسورها را به صورت آماده می‌توانیم دریافت کنیم. (داخل پوشه‌ی hex_cods موجود است.) کد هرکدام را داخل پروتئوس به سنسور مربوطه آپلود می‌کنیم.
کد باینری آردوینو را با توجه به نیازمندی خود با استفاده از Arduino IDE می‌نویسیم و از همین ابزار در انتها برای خروجی باینری استفاده می‌کنیم.

کتابخانه servo motor را در ابتدای فایل import می‌کنیم.

#include <Servo.h>

در ادامه پین‌های آردوینو را داخل متغیرهایی ست می‌کنیم تا کار با آن‌ها ساده باشد.
Servo myservo;
int flame = 11;
int smoke = 12;
int red = 2;
int green = 3 ;
int buzzer = 10 ;

در ابتدای کد باید به setup بپردازیم. پین‌های ورودی و خروجی را مشخص کرده و servo motor را در ابتدا صفر می‌کنیم.

void setup ()
{
  pinMode (flame, INPUT) ;
  pinMode (smoke, INPUT) ;
  pinMode (red, OUTPUT) ;
  pinMode (green, OUTPUT) ;
  pinMode (buzzer, OUTPUT) ;
  myservo.attach(8);
  myservo.write(0);
}

در ادامه یک تابع loop ساخته و با استفاده از آن برنامه‌ی خود را مداوم به حالت اجرا می‌گذاریم و با استفاده از سنسورها خروجی مربوطه را به ledها و servo motor ارسال می‌کنیم.

void loop ()
{
  float sens_value = analogRead(smoke);
  int f = digitalRead(flame) ;
  int s = digitalRead(smoke);

  Serial.print("Sensor Value: ");
  Serial.print(sens_value);
  
  if ( f == HIGH or s == HIGH)
  {
    digitalWrite(red, HIGH);
    digitalWrite(buzzer, HIGH);
    digitalWrite(green, LOW);
    myservo.write(180);
  }
  else
  {
    digitalWrite(red, LOW);
    digitalWrite(green, HIGH);
    digitalWrite(buzzer, LOW);
    myservo.write(0);
  }
 
  delay(100);
}







کد تمام شد حالا باید خروجی باینری آن را گرفته و روی برد آردوینو آپلود کنیم.
مدار نهایی ما به شکل زیر می‌باشد.






